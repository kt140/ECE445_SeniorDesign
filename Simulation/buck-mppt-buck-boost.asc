Version 4
SHEET 1 1384 680
WIRE 800 -80 720 -80
WIRE 928 -80 928 -96
WIRE 928 -80 880 -80
WIRE 96 -64 64 -64
WIRE 208 -64 176 -64
WIRE 64 48 64 -64
WIRE 112 48 64 48
WIRE 208 48 208 -64
WIRE 208 48 160 48
WIRE 720 48 720 -80
WIRE 816 48 720 48
WIRE 928 48 928 -80
WIRE 928 48 864 48
WIRE 96 96 0 96
WIRE 272 96 176 96
WIRE 352 96 272 96
WIRE 496 96 432 96
WIRE 800 96 496 96
WIRE 928 96 880 96
WIRE 976 96 928 96
WIRE 1072 96 1040 96
WIRE 1168 96 1072 96
WIRE 0 128 0 96
WIRE 928 128 928 96
WIRE 1072 128 1072 96
WIRE 1168 128 1168 96
WIRE 272 144 272 96
WIRE 496 144 496 96
WIRE 0 240 0 208
WIRE 272 240 272 208
WIRE 272 240 0 240
WIRE 496 240 496 208
WIRE 496 240 272 240
WIRE 624 240 496 240
WIRE 928 240 928 208
WIRE 928 240 624 240
WIRE 1072 240 1072 192
WIRE 1072 240 928 240
WIRE 1168 240 1168 208
WIRE 1168 240 1072 240
WIRE 624 256 624 240
WIRE 0 272 0 240
FLAG 0 272 0
FLAG 624 256 0
SYMBOL voltage 0 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL diode 288 208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL ind 336 112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL cap 480 144 R0
SYMATTR InstName C1
SYMATTR Value 470µ
SYMBOL sw 192 96 R90
SYMATTR InstName S1
SYMATTR Value MOSFET
SYMBOL voltage 80 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 100 0 1n 1n {D/Fs} {1/Fs} 1Meg)
SYMBOL sw 896 96 R90
SYMATTR InstName S2
SYMATTR Value MOSFET
SYMBOL ind 912 112 R0
SYMATTR InstName L2
SYMATTR Value 2m
SYMBOL diode 1040 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMBOL cap 1056 128 R0
SYMATTR InstName C3
SYMATTR Value 470µ
SYMBOL res 1152 112 R0
SYMATTR InstName R2
SYMATTR Value 2
SYMBOL voltage 784 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(100 0 0 1n 1n {D2/Fss} {1/Fss} 1Meg)
TEXT -488 112 Left 2 !.tran 500m
TEXT 264 288 Left 2 !.model MOSFET SW(Ron=1u Roff=100Meg Vt=90)
TEXT -488 56 Left 2 ;Switching frequency: 16 kHz
TEXT -488 184 Left 2 !.param Fs = 16k\n.param D = 0.5
TEXT 216 -168 Left 4 ;Buck for MPPT --> Buck-Boost for 5 V output
TEXT 1168 -96 Left 2 !.param Fss=30k
TEXT 1176 -48 Left 2 !.param D2=0.45
